Readline学习笔记
================

.. contents::

这个笔记暂时只有在命令行使用readline的部分，而不包括利用readline进行编程的部分。

概述
----

可用下面的命令列出所有绑定的按键和对应的命令：

    bind -P 或者

    bind -p（可用于INPUTRC文件里的更简洁的格式）

在以上的命令输出中只有命令名而没有相应按键的代表这个命令未绑定任何按键。

命令行编辑命令
--------------

常用命令
~~~~~~~~

C-_ 或者 C-x C-u 撤销上次操作。其实更方便的快捷键是 C-/ 。

C-k 剪切从光标处到行尾所有内容。

M-d 剪切从光标处到单词尾部所有内容。

M-<DEL> 剪切从光标处到单词开头所有内容。

C-w 剪切从光标处到光标前一个空白字符之间的内容。注意这个命令不同于M-<DEL> ，因为单词的边界不同。

C-y 粘贴上次剪切的内容。

M-y 在以前的所有剪切内容之间循环，将之前的内容粘贴在光标处。这个命令只有在 C-y 或 M-y 命令之后使用。（意思就是说先用 C-y 命令粘贴了一下，然后发现内容不是自己想要的，然后再接着用一个或者多个 M-y 命令将以前剪切的内容粘贴在光标处）

可以给命令行快捷键传递参数，可以是数字参数作为一个命令的重复次数，例如M-3 C-d 就代表重复 C-d 命令三次。传递的参数也可以是一个负号，表示操作的方向相反，例如 M-- C-k 代表剪切从光标出到行首的所有字符, M--3 C-d 代表重复 C-d 命令三次，方向是从光标处向回退的方向。

M-C-y

M-.或者M-_

C-x <BACKSPACE> 删除行首到光标处所有文本

C-d、C-h 删除光标后或者光标前的一个字符，可带参数

quoted-insert (C-q or C-v) 将接下来输入的字符插入到当前位置（我的系统上虽然显示绑定到了C-q和C-v上，但只有C-v生效）

C-t 交换光标前的两个字符的位置

M-t 交换光标前的两个单词的位置

M-u、M-l、M-c 将光标后的单词改为大写、小写和首字母大写

历史记录命令
~~~~~~~~~~~~

C-p、C-n 历史记录中的前一条命令和后一条命令

M-<、M-> 历史命令中第一个和最后一个命令

C-r、C-s 在历史命令中进行逆向和正向搜索，连续按2次此键则会搜索上一次的字符串。

M-p、M-n 同上，进行非递归搜索

其他命令
~~~~~~~~

overwrite-mode 开启覆盖写模式

shell-forward-word ()
shell-backward-word ()
redraw-current-line ()

history-search-forward
history-search-backward 在历史命令中搜索当前行中从开始到光标处的文本

配置文件
--------

Readline库自带的是 emacs 类型的按键绑定，也可以通过设置将其换成其它类型
的按键绑定。配置文件的搜索步骤：

1. 由环境变量 INPUTRC 指定的文件。
2. ~/.inputrc
3. /etc/inputrc

实际上在个人的 inputrc 文件中一般都要包含系统级的配置文件

::

     $include /etc/inputrc

配置文件格式
~~~~~~~~~~~~

以 # 符号开始的行为注释。以 $ 符号开头的行说明这一行为控制结构。

通过 set 命令设置，使用 set VARIABLE VALUE 格式，例如 set editing-mode
vi。其中的变量名不分大小写，不能识别的变量会被忽略。布尔变量的值如果设
为 null 或者为空或者为ON（忽略大小写）或者为1，则为 on ，其它任何变量都
会将其设为 off 。

可用的变量列表

- bell-style

    终端响铃类型。可以为 none、visible、audible。其中 audible为默认值。

- bind-tty-special-chars

- comment-begin

- completion-ignore-case

- completion-prefix-display-length

- completion-query-items

- convert-meta

- disable-completion

- editing-mode

    编辑模式，可以为'emacs'或'vi'。

- enable-keypad

- expand-tilde

- history-preserve-point

- history-size

- horizontal-scroll-mode

- input-meta

- isearch-terminators

- keymap

- mark-directories

- mark-modified-lines

- mark-symlinked-directories

- match-hidden-files

- output-meta

- page-completions

- print-completions-horizontally

- revert-all-at-newline

- show-all-if-ambiguous

- show-all-if-unmodified

- visible-stats
